{"version":3,"file":"index.js","sources":["../../src/components/VistaContext.tsx","../../src/components/VistaCheck.tsx","../../src/components/VistaGrant.tsx","../../src/components/VistaRoles.tsx","../../src/components/hooks/useVistaClient.tsx"],"sourcesContent":[null,null,null,null,null],"names":["VistaContext","React","createContext","secret","defaultClient","VistaClient","VistaProvider","Component","render","branch","hostname","this","props","client","createElement","Provider","value","children","VistaCheck","constructor","state","hasChecked","granted","componentDidMount","async","vistaClient","context","users","check","userId","action","resourceId","resourceType","catch","err","handleError","console","log","length","setState","renderedComponent","denyComponent","contextType","UserRoleGrantSelect","label","roles","onChange","className","style","FormControl","sx","minWidth","InputLabel","Select","event","target","map","role","MenuItem","key","id","_VistaGrant","super","grant","roleId","orgId","onGrant","onGrantError","grantRequest","relation","resource_id","resource_type","success","grants","listUnflattened","filter","g","relation_type","selectedUserId","selectedRoleId","list","classes","styles","userIdMap","container","title","newGrantRow","userSelect","width","Object","entries","name","roleSelect","rid","Button","grantButton","variant","disabled","onClick","grantList","List","ListItem","userset_id","grantRow","secondaryAction","grantRoleSelect","ListItemText","primary","defaultProps","VistaGrant","withStyles","height","display","flexDirection","border","borderColor","borderWidth","padding","marginBottom","marginTop","flexGrow","marginRight","overflow","margin","PermissionsTableRow","row","text","inheritedFrom","permissionsTableRowInherited","permissionsTableRow","PermissionsTable","permissionsTable","DataTable","columns","selector","sortable","cell","right","attribute","actions","join","data","rolesById","tableKeys","parentIds","parent_roles","seen","Set","tablePermissions","parentId","shift","has","add","parentRole","rt","resource_types_to_attributes_to_actions","push","_VistaRoles","forEach","rolesList","disablePadding","values","ListItemButton","rolesListRow","selected","disableRipple","VistaRoles","borderRight","rolesListRowText","fontSize","color","useVistaClient","useContext"],"mappings":"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"}