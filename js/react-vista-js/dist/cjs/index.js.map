{"version":3,"file":"index.js","sources":["../../src/components/VistaContext.tsx","../../src/components/VistaCheck.tsx","../../src/components/VistaGrant.tsx","../../src/components/VistaRoles.tsx","../../src/components/hooks/useVistaClient.tsx"],"sourcesContent":[null,null,null,null,null],"names":["VistaContext","React","createContext","secret","defaultClient","VistaClient","VistaProvider","Component","render","branch","hostname","this","props","client","createElement","Provider","value","children","VistaCheck","constructor","state","hasChecked","granted","componentDidMount","async","vistaClient","context","users","check","userId","action","resourceId","resourceType","catch","err","handleError","console","log","length","setState","renderedComponent","denyComponent","contextType","UserRoleGrantSelect","label","userRoles","allRoles","className","style","grantRole","revokeRole","FormControl","sx","minWidth","InputLabel","Select","multiple","onChange","event","updatedRoleIds","target","updatedSet","Set","revokedRoleId","find","r","has","userRolesSet","grantedRoleId","map","role","MenuItem","key","id","_VistaGrant","super","onGrantChange","roleId","changeFn","orgId","onGrant","success","allGrants","grants","listUnflattened","usersetIdToGrants","forEach","grant","userset_id","relation_type","push","selectedUserId","selectedRoleIds","roles","userIds","withBranch","list","u","classes","styles","userIdMap","title","onRevoke","container","newGrantRow","userSelect","width","Object","entries","name","roleSelect","filter","g","relation","includes","Button","grantButton","variant","disabled","onClick","grantList","List","keys","usersetId","roleIds","ListItem","grantRow","secondaryAction","newGrants","grantRoleSelect","ListItemText","primary","defaultProps","VistaGrant","withStyles","height","display","flexDirection","border","borderColor","borderWidth","padding","marginBottom","marginTop","flexGrow","marginRight","overflow","margin","PermissionsTableRow","row","text","inheritedFrom","permissionsTableRowInherited","permissionsTableRow","PermissionsTable","permissionsTable","DataTable","columns","selector","sortable","cell","right","attribute","actions","join","data","rolesById","tableKeys","parentIds","parent_roles","seen","tablePermissions","parentId","shift","add","parentRole","rt","resource_types_to_attributes_to_actions","_VistaRoles","selectedRoleId","rolesList","disablePadding","values","ListItemButton","rolesListRow","selected","disableRipple","VistaRoles","borderRight","rolesListRowText","fontSize","color","useContext"],"mappings":"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"}