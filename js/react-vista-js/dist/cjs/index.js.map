{"version":3,"file":"index.js","sources":["../../src/components/VistaContext.tsx","../../src/components/VistaCheck.tsx","../../src/components/VistaGrant.tsx","../../src/components/VistaRoles.tsx"],"sourcesContent":[null,null,null,null],"names":["VistaContext","React","createContext","secret","vistaClient","VistaClient","VistaProvider","Component","render","createElement","Provider","value","this","props","children","VistaCheck","constructor","state","hasChecked","granted","componentDidMount","async","context","branch","hostname","users","check","userId","action","resourceId","resourceType","catch","err","handleError","console","log","length","setState","renderedComponent","denyComponent","contextType","UserRoleGrantSelect","label","roles","onChange","className","style","FormControl","sx","minWidth","InputLabel","Select","event","target","map","role","MenuItem","key","id","_VistaGrant","super","grant","roleId","orgId","onGrant","onGrantError","grantRequest","relation","resource_id","resource_type","success","grants","client","listUnflattened","filter","g","relation_type","selectedUserId","selectedRoleId","list","classes","styles","userIdMap","container","title","newGrantRow","userSelect","width","Object","entries","name","roleSelect","rid","Button","grantButton","variant","disabled","onClick","grantList","List","ListItem","userset_id","grantRow","secondaryAction","grantRoleSelect","ListItemText","primary","defaultProps","VistaGrant","withStyles","height","display","flexDirection","border","borderColor","borderWidth","padding","marginBottom","marginTop","flexGrow","marginRight","overflow","margin","PermissionsTableRow","row","text","inheritedFrom","permissionsTableRowInherited","permissionsTableRow","PermissionsTable","permissionsTable","DataTable","columns","selector","sortable","cell","right","attribute","actions","join","data","rolesById","tableKeys","parentIds","parent_roles","seen","Set","tablePermissions","parentId","shift","has","add","parentRole","rt","resource_types_to_attributes_to_actions","push","_VistaRoles","forEach","rolesList","disablePadding","values","ListItemButton","rolesListRow","selected","disableRipple","VistaRoles","borderRight","rolesListRowText","fontSize","color"],"mappings":"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"}